// HA-01 Home Automation Simulator
// Blynk-based Home Automation (3 Relays)
// ESP32 DOIT Devkit V1

#define BLYNK_TEMPLATE_ID   "TMPLXXXXXXX"
#define BLYNK_TEMPLATE_NAME "Home Automation Board"
#define BLYNK_AUTH_TOKEN    "YOUR_BLYNK_AUTH_TOKEN"

#define BLYNK_PRINT Serial

#include <WiFi.h>
#include <WiFiClient.h>
#include <BlynkSimpleEsp32.h>

// WiFi credentials
char ssid[] = "YOUR_WIFI_NAME";
char pass[] = "YOUR_WIFI_PASSWORD";

// Relay pins (Active LOW)
#define RELAY1  15
#define RELAY2  2
#define RELAY3  4

void setup() {
  Serial.begin(115200);

  Blynk.begin(BLYNK_AUTH_TOKEN, ssid, pass);

  pinMode(RELAY1, OUTPUT);
  pinMode(RELAY2, OUTPUT);
  pinMode(RELAY3, OUTPUT);

  // Relays OFF by default
  digitalWrite(RELAY1, HIGH);
  digitalWrite(RELAY2, HIGH);
  digitalWrite(RELAY3, HIGH);
}

// Blynk virtual buttons
BLYNK_WRITE(V0) { digitalWrite(RELAY1, param.asInt() ? LOW : HIGH); }
BLYNK_WRITE(V1) { digitalWrite(RELAY2, param.asInt() ? LOW : HIGH); }
BLYNK_WRITE(V2) { digitalWrite(RELAY3, param.asInt() ? LOW : HIGH); }

void loop() {
  Blynk.run();
}
